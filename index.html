<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Diamo Clone</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    /* ─── 리셋 & 기본 ─────────────────────────────────────── */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Playfair Display', serif; background:#fff; color:#2a2a2a; line-height:1.8; }

    /* ─── 헤더 & 네비게이션 ───────────────────────────────── */
    .header { background:#f5f5f5; padding:20px; position:sticky; top:0; z-index:1000; box-shadow:0 2px 8px rgba(0,0,0,0.05); }
    .nav { display:flex; justify-content:space-between; align-items:center; max-width:1200px; margin:auto; }
    .logo { font-size:2rem; font-weight:700; color:#111; }
    .nav-links { list-style:none; display:flex; gap:20px; }
    .nav-links a { text-decoration:none; color:#333; font-size:1.1rem; font-weight:500; }

    /* ─── 히어로 ─────────────────────────────────────────── */
    .hero { background:#e0e0e0; padding:100px 20px; text-align:center; }
    .hero h1 { font-size:3rem; }
    .hero p  { font-size:1.3rem; }

    /* ─── 갤러리 그리드 ──────────────────────────────────── */
    .section { padding:60px 20px; max-width:1000px; margin:auto; }
    .projects-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(300px,1fr)); gap:20px; }
    .project { text-align:center; background:#f0f0f0; }
    .project img {
      width:100%; aspect-ratio:1/1; object-fit:cover;
      cursor:pointer; transition:transform .3s ease;
    }
    .project img:hover { transform:scale(1.03); }

    /* ─── 라이트박스 ─────────────────────────────────────── */
    .lightbox {
      display:none;              /* 기본 숨김 */
      flex-direction:column;     /* 도트 아래 정렬 */
      position:fixed; top:0; left:0;
      width:100vw; height:100vh;
      background:rgba(0,0,0,0.9);
      justify-content:center; align-items:center;
      z-index:2000;
    }
    #lightbox-container {
      position:relative; width:90vw; height:80vh;
      overflow:hidden; display:flex; align-items:center; justify-content:center;
    }
    #lightbox-container img {
      position:absolute; max-width:100%; max-height:100%;
      transition:transform .3s ease-out, opacity .3s ease-out;
    }
    .close-btn {
      position:fixed; top:20px; right:30px;
      font-size:30px; color:white; cursor:pointer; z-index:2100;
    }
    .arrow {
      position:absolute; top:50%; font-size:40px;
      color:white; cursor:pointer; user-select:none;
    }
    .arrow.left  { left:20px; }
    .arrow.right { right:20px; }
    .dots { margin-top:12px; }  /* 이미지 아래 중앙 정렬 */
    .dots span {
      display:inline-block; width:10px; height:10px; margin:0 5px;
      background:#bbb; border-radius:50%;
    }
    .dots .active { background:#717171; }

    /* ─── 푸터 ───────────────────────────────────────────── */
    .footer {
      background:#f5f5f5; padding:40px 20px;
      display:flex; flex-direction:column; align-items:center;
    }
    .footer-copy { color:#666; font-size:0.9rem; }
    .footer-icons {
      margin-top:10px; display:flex; gap:16px; font-size:1.5rem;
      align-self:flex-start; margin-left:20px;  /* 왼쪽 정렬 */
    }

    /* ─── 반응형(모바일) ───────────────────────────────── */
    @media (max-width:768px) {
      .nav {
        flex-direction:row; justify-content:space-between; align-items:center;
        padding:10px 20px;
      }
      .nav-links { flex-direction:row; margin-top:0; }
      .close-btn { display:none !important; } /* 모바일에선 X 숨김 */
      .hero { padding:60px 10px; }
      .section { padding:40px 10px; }
    }
  </style>
</head>
<body>

  <!-- 헤더 -->
  <header class="header">
    <nav class="nav">
      <div class="logo">DIAMO</div>
      <ul class="nav-links">
        <li><a href="#" id="contact-link">문의하기</a></li>
      </ul>
    </nav>
  </header>

  <!-- 히어로 -->
  <section class="hero">
    <h1>Welcome to DIAMO</h1>
    <p>Unrivaled Ocean Views</p>
  </section>

  <!-- 갤러리 -->
  <section class="section">
    <h2>Gallery</h2>
    <div class="projects-grid">
      <div class="project">
        <img src="https://raw.githubusercontent.com/Lamanujan/Diamo/main/images/w/hw.jpg"
             alt="웨딩" onclick="openGallery('w')">
        웨딩
      </div>
      <div class="project">
        <img src="https://raw.githubusercontent.com/Lamanujan/Diamo/main/images/b/hb.jpg"
             alt="돌잔치" onclick="openGallery('b')">
        돌잔치
      </div>
      <div class="project">
        <img src="https://raw.githubusercontent.com/Lamanujan/Diamo/main/images/s/hs.jpg"
             alt="칠순팔순" onclick="openGallery('s')">
        칠순팔순
      </div>
      <div class="project">
        <img src="https://raw.githubusercontent.com/Lamanujan/Diamo/main/images/m/hm.jpg"
             alt="모임/세미나" onclick="openGallery('m')">
        모임/세미나
      </div>
    </div>
  </section>

  <!-- 라이트박스 -->
  <div class="lightbox" id="lightbox">
    <span class="close-btn" id="closeBtn">&times;</span>
    <div id="lightbox-container">
      <img id="lightbox-current" src="" alt=""/>
      <img id="lightbox-next"    src="" alt="" style="display:none;"/>
    </div>
    <div class="arrow left"  id="prevBtn">&#10094;</div>
    <div class="arrow right" id="nextBtn">&#10095;</div>
    <div class="dots" id="lightbox-dots"></div>
  </div>

  <!-- 문의 팝업 -->
  <div id="contact-popup"
       style="display:none; position:fixed; bottom:20px; left:20px; width:90%; max-width:300px;
              background:#fff; border:1px solid #ccc; padding:15px; box-shadow:0 0 10px rgba(0,0,0,0.2);
              z-index:1500;">
    <span class="close-btn"
          onclick="closeContact()"
          style="position:absolute; top:10px; right:10px; background:#f0f0f0; color:#333;
                 font-size:16px; width:28px; height:28px; display:flex; align-items:center;
                 justify-content:center; cursor:pointer;">
      &times;
    </span>
    <h3 style="margin-bottom:10px;">문의하기</h3>
    <input type="text" placeholder="이름" style="width:100%; margin-bottom:10px; padding:5px;">
    <input type="text" placeholder="전화번호" style="width:100%; margin-bottom:10px; padding:5px;">
    <textarea placeholder="메시지 내용" style="width:100%; margin-bottom:10px; padding:5px;"></textarea>
    <button onclick="sendEmail()"
            style="width:100%; padding:8px; background:#333; color:#fff; border:none; cursor:pointer;">
      전송하기
    </button>
  </div>

  <!-- 푸터 -->
  <footer class="footer">
    <p class="footer-copy">© 2025 DIAMO. All rights reserved.</p>
    <div class="footer-icons">
      <a href="https://www.instagram.com/_eldkah/" target="_blank"
         style="background:linear-gradient(45deg,#f58529,#dd2a7b,#8134af,#515bd4);
                -webkit-background-clip:text; -webkit-text-fill-color:transparent;">
        <i class="fab fa-instagram"></i>
      </a>
      <a href="https://m.blog.naver.com/qowlans1211" target="_blank" style="color:#1EC800;">
        <i class="fas fa-blog"></i>
      </a>
    </div>
  </footer>

  <!-- 스크립트 -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    emailjs.init("9YqLj0sQHeKA9XkIJ");

    let galleryImages = [], galleryIndex = 0, isAnimating = false;
    const counts = { w:29, b:8, s:59, m:47 }, visibleDots = 5;

    // 갤러리 오픈
    function openGallery(prefix) {
      galleryImages = [];
      for (let i = 1; i <= counts[prefix]; i++) {
        galleryImages.push(`https://raw.githubusercontent.com/Lamanujan/Diamo/main/images/${prefix}/${prefix} (${i}).jpg`);
      }
      galleryIndex = 0;
      showImage(0);
      document.getElementById('lightbox').style.display = 'flex';
      history.pushState({ lightboxOpen:true }, '', '');
    }

    // 갤러리 닫기
    function closeLightbox() {
      document.getElementById('lightbox').style.display = 'none';
      if (history.state?.lightboxOpen) history.back();
    }

    // 뒤로가기 버튼으로 닫기
    window.addEventListener('popstate', () => {
      if (document.getElementById('lightbox').style.display === 'flex') {
        document.getElementById('lightbox').style.display = 'none';
      }
    });

    // 이미지 표시 & 도트 업데이트
    function showImage(idx) {
      document.getElementById('lightbox-current').src = galleryImages[idx];
      galleryIndex = idx;
      updateDots();
    }

    // 슬라이드 애니메이션
    function slideImage(dir) {
      if (isAnimating) return;
      isAnimating = true;
      const curr = document.getElementById('lightbox-current');
      const next = document.getElementById('lightbox-next');
      const newIdx = (galleryIndex + dir + galleryImages.length) % galleryImages.length;

      next.src = galleryImages[newIdx];
      next.style.display = 'block';
      next.style.transition = 'none';
      next.style.transform = `translate3d(${dir>0?'100%':'-100%'},0,0)`;
      next.style.opacity = '0';

      requestAnimationFrame(() => {
        curr.style.transition = 'transform .3s ease-out, opacity .3s ease-out';
        next.style.transition = 'transform .3s ease-out, opacity .3s ease-out';
        curr.style.transform = `translate3d(${dir>0?'-100%':'100%'},0,0)`;
        curr.style.opacity = '0';
        next.style.transform = 'translate3d(0,0,0)';
        next.style.opacity = '1';
      });

      next.addEventListener('transitionend', function handler(e) {
        if (e.propertyName !== 'transform') return;
        next.removeEventListener('transitionend', handler);
        curr.src = next.src;
        curr.style.transition = 'none';
        curr.style.transform = 'translate3d(0,0,0)';
        curr.style.opacity = '1';
        next.style.display = 'none';
        galleryIndex = newIdx;
        updateDots();
        isAnimating = false;
      });
    }

    // 버튼 이벤트
    document.getElementById('prevBtn').addEventListener('click', () => slideImage(-1));
    document.getElementById('nextBtn').addEventListener('click', () => slideImage(1));
    document.getElementById('closeBtn').addEventListener('click', closeLightbox);

    // 터치 스와이프
    (function(){
      const box = document.getElementById('lightbox-container');
      let startX=0, startT=0;
      box.addEventListener('touchstart', e=> { startX=e.touches[0].clientX; startT=Date.now(); });
      box.addEventListener('touchend',   e=> {
        const dx = e.changedTouches[0].clientX - startX;
        const dt = Date.now() - startT;
        if (Math.abs(dx)>50 && dt<500) slideImage(dx<0?1:-1);
      });
    })();

    // 도트 업데이트
    function updateDots() {
      const wrap = document.getElementById('lightbox-dots');
      wrap.innerHTML = '';
      const total = Math.min(visibleDots, galleryImages.length);
      const start = Math.max(0, Math.min(galleryIndex - Math.floor(visibleDots/2), galleryImages.length - visibleDots));
      for (let i=0; i<total; i++) {
        const dot = document.createElement('span');
        if (i === (galleryIndex - start)) dot.classList.add('active');
        wrap.appendChild(dot);
      }
    }

    // 문의 팝업
    document.getElementById('contact-link').addEventListener('click', e => {
      e.preventDefault();
      const pu = document.getElementById('contact-popup');
      pu.style.display = pu.style.display==='none'?'block':'none';
    });
    function closeContact() {
      document.getElementById('contact-popup').style.display='none';
    }

    // 이메일 전송
    function sendEmail() {
      const name = document.querySelector('#contact-popup input[placeholder="이름"]').value;
      const num  = document.querySelector('#contact-popup input[placeholder="전화번호"]').value;
      const msg  = document.querySelector('#contact-popup textarea').value;
      const btn  = document.querySelector('#contact-popup button');
      btn.innerText='전송 중...'; btn.disabled=true; btn.style.opacity='0.6';
      emailjs.send("service_12ehn7t","template_2jcmp9n",{
        from_name:name, contact_number:num, message:msg
      }).then(_=>{
        btn.innerText='전송 완료';
        setTimeout(()=>{
          btn.innerText='전송하기'; btn.disabled=false; btn.style.opacity='1';
        },2000);
      }, _=>{
        alert("전송 실패"); btn.innerText='전송하기'; btn.disabled=false; btn.style.opacity='1';
      });
    }

    // ESC 키로 닫기 (라이트박스 + 문의팝업)
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        if (document.getElementById('lightbox').style.display === 'flex') {
          closeLightbox();
        }
        if (document.getElementById('contact-popup').style.display === 'block') {
          closeContact();
        }
      }
    });
  </script>
</body>
</html>
